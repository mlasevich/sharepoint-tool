language: python

python:
#  - "2.6"
#  - "2.7"
#  - "3.3"
#  - "3.4"
#  - "3.5"
#  - "3.5-dev"  # 3.5 development branch
  - "3.6"
#  - "3.6-dev"  # 3.6 development branch
#  - "3.7-dev"  # 3.7 development branch

cache: pip

# command to install dependencies
install:
  - 'pip install -r requirements-dev.txt'
  - 'pip install -r requirements.txt'
  - 'pip install coveralls'

script: 
  -  'python -m pytest --junitxml ./reports/results.xml --cov-config .coveragerc --cov=src .'

after_success:
  - coveralls

deploy:
  provider: pypi
  user: __token__
  password:
    secure: dsOB536U4UoHl7yiPVDlinIVzLdEBMrEUeMNukVxMbYRMqSiZbYBGlOcfyFTrfKAQkQUoHB8EYjgNTqtQsnYEh/rt35frKCfIwUPVgOfV+A/Zuh/gIvQdJyJcA1VFPFaG9oCDPWJttQjOxABDnshn59DNdZTzDtnutLuNPK8+qVL8og5BG0JCuTIXjXhuWLZl+vEC5XSOF72gXTSnPSpD0Cyy2YKfAkCRTSP6rresWzue0JyinI3wVCkWVLv4dWpW69EpbpThYdRQxCpoHxPKBcnttkWbDUSZZpHtRoMrnkNyjYfEA3yOl52CG7BjpKb8PoZus7wfos2fhdp0Y4zU34i1zC4r0kZ6D2E4/DhXH6CGyi1mZatbk2icKqgowNIW6k8iI0TfMdovoe5jETHTDbZTsNx4WUN51PY2lPcMGlzPuIyYP2a9OydMxn14G2ga88k2j6c0x9CEQeNNmc/EBRnvYVlazIyiYEcVPXjADGA8jQQefUnEZ9N3twaVDoB8Wfyz6Hn3hN7/dMmeP24JhJ28G8jiqXeBsNNEe0qH5sG6ejOizv8IeHxHiLMeeyUmQeWvFfslAUWrlrn3YqfDHZ7jzcLm/Jv5TkIqqBP+ffIpgE+97v6+tpVkcWj1FJ1k/1diFNThGwjHTPdrh9QAqfzwjp3oekSXGbHC2j6iM8=
  skip_existing: true
  distributions: "sdist bdist_wheel"
  on:
    tags: true
